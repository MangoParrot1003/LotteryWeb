# 学生抽签系统 - 项目说明

## 📋 项目概述

这是一个完整的学生抽签系统，采用前后端分离架构：
- **后端**：C# ASP.NET Core 8.0 + Entity Framework Core + SQLite
- **前端**：Vue 3 + TypeScript + Vite

## 🎯 核心功能

1. **随机抽签**：从学生数据库中随机抽取学生
2. **条件筛选**：支持按性别、班级筛选
3. **动画效果**：抽签过程带有视觉动画
4. **统计展示**：显示学生总数、性别分布、班级分布
5. **实时更新**：前端实时从后端获取最新数据

## 📁 项目结构

```
抽签程序/
│
├── lottery-backend/              # C# 后端项目
│   ├── Controllers/
│   │   └── LotteryController.cs # API 控制器
│   ├── Data/
│   │   └── StudentContext.cs    # 数据库上下文
│   ├── Models/
│   │   └── Student.cs            # 学生模型
│   ├── Properties/
│   │   └── launchSettings.json   # 启动配置
│   ├── Program.cs                # 程序入口
│   └── lottery-backend.csproj    # 项目配置
│
├── lottery-frontend/             # Vue 前端项目
│   ├── src/
│   │   ├── App.vue              # 主应用组件
│   │   ├── main.ts              # 入口文件
│   │   └── style.css            # 全局样式
│   ├── index.html               # HTML 模板
│   ├── package.json             # 依赖配置
│   └── vite.config.ts           # Vite 配置
│
├── students.db                   # SQLite 数据库
├── start-backend.bat            # 后端启动脚本
├── start-frontend.bat           # 前端启动脚本
└── 使用说明.md                  # 详细使用说明
```

## 🔧 技术实现

### 后端技术栈

1. **ASP.NET Core 8.0**
   - 轻量级、高性能的 Web 框架
   - 跨平台支持

2. **Entity Framework Core**
   - ORM 框架，简化数据库操作
   - 支持 LINQ 查询

3. **SQLite**
   - 轻量级嵌入式数据库
   - 无需额外安装数据库服务器
   - 数据文件便于备份和迁移

4. **CORS 配置**
   - 允许前端跨域访问
   - 支持 Vue 开发服务器

### 前端技术栈

1. **Vue 3**
   - 组合式 API (Composition API)
   - 响应式数据绑定
   - 组件化开发

2. **TypeScript**
   - 类型安全
   - 更好的 IDE 支持
   - 减少运行时错误

3. **Vite**
   - 快速的开发服务器
   - 热模块替换 (HMR)
   - 优化的生产构建

## 🎨 界面设计

- **渐变背景**：紫色渐变营造科技感
- **卡片式布局**：清晰展示学生信息
- **动画效果**：抽签时的抖动动画增加趣味性
- **响应式设计**：适配不同屏幕尺寸

## 🔌 API 设计

### RESTful API 接口

| 端点 | 方法 | 功能 | 参数 |
|------|------|------|------|
| `/api/lottery/students` | GET | 获取所有学生 | - |
| `/api/lottery/students/{id}` | GET | 获取单个学生 | id: 学生ID |
| `/api/lottery/draw` | GET | 随机抽签 | gender, className (可选) |
| `/api/lottery/stats` | GET | 获取统计信息 | - |

### 数据模型

```csharp
public class Student
{
    public int Id { get; set; }
    public int? SerialNumber { get; set; }
    public string StudentId { get; set; }
    public string Name { get; set; }
    public string? Gender { get; set; }
    public string? Major { get; set; }
    public string? Class { get; set; }
}
```

## 🚀 部署说明

### 开发环境
- 后端运行在 `http://localhost:5000`
- 前端运行在 `http://localhost:5173`

### 生产部署

#### 后端部署
```bash
cd lottery-backend
dotnet publish -c Release -o publish
# 将 publish 文件夹和 students.db 部署到服务器
```

#### 前端部署
```bash
cd lottery-frontend
npm run build
# 将 dist 文件夹部署到 Web 服务器
```

## 📊 数据库信息

### 表结构：students

| 字段 | 类型 | 约束 | 说明 |
|------|------|------|------|
| id | INTEGER | PRIMARY KEY, AUTOINCREMENT | 主键 |
| serial_number | INTEGER | - | 序号 |
| student_id | TEXT | NOT NULL | 学号 |
| name | TEXT | NOT NULL | 姓名 |
| gender | TEXT | - | 性别 |
| major | TEXT | - | 专业 |
| class | TEXT | - | 班级 |

### 当前数据统计
- 总学生数：266 人
- 男生：196 人
- 女生：70 人
- 班级：4 个（25计科1班、25计科2班、25计科3班、25软工班）

## 🔐 安全考虑

1. **CORS 限制**：只允许特定域名访问
2. **参数验证**：后端验证所有输入参数
3. **错误处理**：统一的错误响应格式
4. **数据库连接**：使用连接池管理

## 🎓 学习价值

这个项目展示了：
1. ✅ 前后端分离架构
2. ✅ RESTful API 设计
3. ✅ ORM 框架使用
4. ✅ 现代前端框架应用
5. ✅ TypeScript 类型系统
6. ✅ 异步编程实践
7. ✅ CORS 跨域处理

## 📝 后续扩展建议

1. **功能扩展**
   - 添加抽签历史记录
   - 支持批量抽签
   - 添加抽签权重设置
   - 导出抽签结果

2. **技术优化**
   - 添加 Redis 缓存
   - 实现 WebSocket 实时推送
   - 添加用户认证授权
   - 数据库迁移到 PostgreSQL/MySQL

3. **界面优化**
   - 添加更多动画效果
   - 支持主题切换
   - 移动端适配优化
   - 添加音效

## 📞 技术支持

如遇问题，请检查：
1. .NET SDK 版本是否为 8.0+
2. Node.js 版本是否为 18+
3. 端口 5000 和 5173 是否被占用
4. students.db 文件是否存在且可读

---

**开发完成时间**：2025年12月6日
**技术栈版本**：
- .NET 8.0
- Vue 3.5
- TypeScript 5.9
- Vite 7.2
